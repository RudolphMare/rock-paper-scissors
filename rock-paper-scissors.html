<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Rock Paper Scissors</title>
</head>

<body>

  <script type="text/javascript">

    function computerPlay() {
      let computerArsenal = ['Rock', 'Paper', 'Scissors'];
      let computerChoice = computerArsenal[Math.floor(Math.random()*computerArsenal.length)];
      return(computerChoice);
    }

    function playerPlay() {
      let isLegalWeapon = false;
      let playerChoice;

      do {
        playerChoice = prompt("Choose your weapon: Rock, Paper, or Scissors?");

        if (playerChoice === null) {
            alert ('You forfeit. Computer wins!');
            break;
        } else if (playerChoice.toLowerCase() === 'rock' || 
        playerChoice.toLocaleLowerCase() === 'paper' || 
        playerChoice.toLocaleLowerCase() === 'scissors') {
          isLegalWeapon = true;          
        } else {
            alert('Illegal weapon! You must choose Rock, Paper, or Scissors!');
        }
      } while (isLegalWeapon === false);
      return(playerChoice);
    }    

    function capitalize(string) {
      let firstLetter = string.slice(0, 1);
      let stringLength = string.length;
      let remainingLetters = string.slice(1, stringLength)
      let lower = string.toLowerCase();
      return(firstLetter.toUpperCase() + remainingLetters.toLowerCase());
    }

    function playRound(playerSelection, computerSelection) {
      let player = playerSelection.toLowerCase();
      let computer = computerSelection.toLowerCase();

      console.log('Your weapon: ' + capitalize(player));
      console.log('Computer\'s weapon: ' + computerSelection);

      if (player === computer) {
        return('It\'s a draw!');
      } else if (
      (player === 'rock' && computer === 'paper') ||
      (player === 'paper' && computer === 'scissors') ||
      (player === 'scissors' && computer === 'rock')) {
        return ('You lose! ' + computerSelection + ' beats ' + player + '.');
      } else {
        return ('You win! ' + capitalize(player) + ' beats ' + computer + '.');
      }      
    }

    function game() {
      let computerScore = 0;
      let playerScore = 0;

      for (roundCount = 0; roundCount < 5; roundCount++) {
        console.log('Round: ' + (roundCount+1));
        console.log('Choose your weapon!')        
       
        let roundResult = playRound(playerPlay(), computerPlay());        
        console.log(roundResult);
        
        if (roundResult.indexOf('win') > 0) {
          ++playerScore;
        } else if (roundResult.indexOf('lose') > 0) {
          ++computerScore;
        }

        console.log('Score: Player ' + playerScore + ' | ' + computerScore + ' Computer');
      }

      if (playerScore > computerScore) {
        console.log('**You are the winner!**');
      } else if (computerScore > playerScore) {
        console.log('**You lost to the computer!**');
      } else {
        console.log('**It\'s a tie!**');
      }

    }

    game();    

  </script>

</body>
</html>